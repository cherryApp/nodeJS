var fs = require( "fs" );

// Üzenet kiírása a konzolra.
// @param message: string.
var showConsolMessage = function( message ) {
    
    // Konzolra írás.
    console.log( message );
    
};

// Adatok keresése.
// @param path: string, a fájl elérési útja.
// @param key: string, a változó kulcsa.
// @param value: *, az érték.
// return: Array, a megfelelő rekordok.
var findInJSON = function( path, key, value ) {
    value = value.toLowerCase();
    var jsonObject = readAsJSON( path );
    var records = [];
    for ( var k in jsonObject ) {
        if ( jsonObject[k][key].toLowerCase().indexOf(value) !== -1 ) {
            records.push( jsonObject[k] );
        }
    }
    return records;
};

// JSON fájlok olvasása és objektummá alakítása.
// @param path: string, a fájl elérési útja.
var readAsJSON = function( path ) {
    
    // Termékek lekérése a fájl-rendszerből.
    var json = fs.readFileSync(  path, 'utf8' );
    
    // JSON string objektummá alakítása.
    json = JSON.parse( json );
    
    return json;
    
};

// Exportok.
module.exports = {
    "showConsolMessage": showConsolMessage,
    "find": findInJSON
};